exec kogen build -k 'Config.+' kogen.cue
cmp stdout config.yaml

exec kogen build -k 'configmap' kogen.cue
cmp stdout config.yaml

exec kogen build -k 'ConfigMap|Secret' kogen.cue
cmp stdout all.yaml

exec kogen build kogen.cue
cmp stdout all.yaml

-- kogen.cue --
package kube

kogen: app: {
    apiVersion: "kogen.internal/v1alpha1"
    kind: "Objects"
    spec: objects: [
        {
            apiVersion: "v1"
            kind: "ConfigMap"
            metadata: {
                name: "app-config"
                namespace: "default"
            }
            data: {
                database_url: "postgresql://localhost:5432/app"
                redis_url: "redis://localhost:6379"
            }
        },
        {
            apiVersion: "v1"
            kind: "Secret"
            metadata: {
                name: "app-secrets"
                namespace: "default"
            }
            type: "Opaque"
            data: {
                password: "c2VjcmV0"
            }
        }
    ]
}

-- config.yaml --
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
  namespace: default
data:
  database_url: postgresql://localhost:5432/app
  redis_url: redis://localhost:6379
-- all.yaml --
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
  namespace: default
data:
  database_url: postgresql://localhost:5432/app
  redis_url: redis://localhost:6379
---
apiVersion: v1
kind: Secret
metadata:
  name: app-secrets
  namespace: default
type: Opaque
data:
  password: c2VjcmV0
